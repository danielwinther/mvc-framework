\hypertarget{class_base_controller}{}\section{Base\+Controller Class Reference}
\label{class_base_controller}\index{Base\+Controller@{Base\+Controller}}
Inheritance diagram for Base\+Controller\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_base_controller}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_base_controller_a095c5d389db211932136b53f25f39685}{\+\_\+\+\_\+construct} ()
\item 
\hyperlink{class_base_controller_a0fd54f433ce0bd8881479f3eb30e13ec}{convert} (\$format, \$data)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_base_controller_a5fa8890bd3a9d20f5c0cc2377dc49eb1}{load\+Model} (\$model, \$constructor=\mbox{[}$\,$\mbox{]})
\item 
\hyperlink{class_base_controller_a170629218b28c1759a89c4978b9323b3}{post\+Input} (\$input=null)
\item 
\hyperlink{class_base_controller_aa0c49b95cd8e5ff8ff61b4a2c35bf1eb}{render\+View} (\$view, \$data=\mbox{[}$\,$\mbox{]})
\item 
\hyperlink{class_base_controller_abd4f25604b09a96c254491df97612cc3}{scrape} (\$action, \$url, \$curl=null)
\item 
\hyperlink{class_base_controller_a259a554926fc05640c8c711c340cdeac}{session} (\$url, \$post\+Data)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 4 of file Base\+Controller.\+php.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_base_controller_a095c5d389db211932136b53f25f39685}{}\index{Base\+Controller@{Base\+Controller}!\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}}
\index{\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}!Base\+Controller@{Base\+Controller}}
\subsubsection[{\+\_\+\+\_\+construct}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+\_\+construct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{class_base_controller_a095c5d389db211932136b53f25f39685}


Definition at line 8 of file Base\+Controller.\+php.



References E\+R\+R\+O\+R\+\_\+\+R\+E\+P\+O\+R\+T\+I\+N\+G.


\begin{DoxyCode}
8                                   \{
9         error\_reporting(\hyperlink{config_8php_a80c2f40a4ce1ad3cbfb1978239f63c31}{ERROR\_REPORTING});
10     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_base_controller_a0fd54f433ce0bd8881479f3eb30e13ec}{}\index{Base\+Controller@{Base\+Controller}!convert@{convert}}
\index{convert@{convert}!Base\+Controller@{Base\+Controller}}
\subsubsection[{convert}]{\setlength{\rightskip}{0pt plus 5cm}convert (
\begin{DoxyParamCaption}
\item[{}]{\$format, }
\item[{}]{\$data}
\end{DoxyParamCaption}
)}\label{class_base_controller_a0fd54f433ce0bd8881479f3eb30e13ec}
Converts data to given format


\begin{DoxyParams}[1]{Parameters}
string & {\em \$format} & \\
\hline
 & {\em object/array} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}


Definition at line 131 of file Base\+Controller.\+php.



References Convert\+Y\+A\+M\+L\textbackslash{}convert().



Referenced by Basic\textbackslash{}return\+Json(), Basic\textbackslash{}return\+Xml(), and Basic\textbackslash{}return\+Yaml().


\begin{DoxyCode}
131                                             \{
132         \textcolor{keywordflow}{switch} ($format) \{
133             \textcolor{keywordflow}{case} \textcolor{stringliteral}{'JSON'}:
134             $convert = \textcolor{keyword}{new} \hyperlink{class_convert_j_s_o_n}{ConvertJSON};
135             \textcolor{keywordflow}{break};
136 
137             \textcolor{keywordflow}{case} \textcolor{stringliteral}{'XML'}:
138             $convert = \textcolor{keyword}{new} \hyperlink{class_convert_x_m_l}{ConvertXML};
139             \textcolor{keywordflow}{break};
140 
141             \textcolor{keywordflow}{case} \textcolor{stringliteral}{'YAML'}:
142             $convert = \textcolor{keyword}{new} \hyperlink{class_convert_y_a_m_l}{ConvertYAML};
143             \textcolor{keywordflow}{break};
144         \}
145 
146         \textcolor{keywordflow}{return} $convert->\hyperlink{class_convert_y_a_m_l_a41444ea294bbd35a6c07ef4e9faeae10}{convert}($data);
147     \}
\end{DoxyCode}
\hypertarget{class_base_controller_a5fa8890bd3a9d20f5c0cc2377dc49eb1}{}\index{Base\+Controller@{Base\+Controller}!load\+Model@{load\+Model}}
\index{load\+Model@{load\+Model}!Base\+Controller@{Base\+Controller}}
\subsubsection[{load\+Model}]{\setlength{\rightskip}{0pt plus 5cm}load\+Model (
\begin{DoxyParamCaption}
\item[{}]{\$model, }
\item[{}]{\$constructor = {\ttfamily \mbox{[}\mbox{]}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_base_controller_a5fa8890bd3a9d20f5c0cc2377dc49eb1}
Loads a given model into the controller


\begin{DoxyParams}[1]{Parameters}
string & {\em \$model} & \\
\hline
array & {\em \$constructor} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
object \$model 
\end{DoxyReturn}


Definition at line 19 of file Base\+Controller.\+php.



References Model\+Factory\textbackslash{}create().



Referenced by Basic\textbackslash{}create\+User(), Basic\textbackslash{}delete\+User(), Basic\textbackslash{}edit\+User(), Basic\textbackslash{}edit\+User\+Post(), Basic\textbackslash{}index(), Basic\textbackslash{}return\+Json(), Basic\textbackslash{}return\+Model(), Basic\textbackslash{}return\+Yaml(), and Basic\textbackslash{}user().


\begin{DoxyCode}
19                                                             \{
20         \textcolor{keywordflow}{return} \hyperlink{class_model_factory_ae4f1d4056520e9f8ac90277d8386bc08}{ModelFactory::create}($model, $constructor);
21     \}
\end{DoxyCode}
\hypertarget{class_base_controller_a170629218b28c1759a89c4978b9323b3}{}\index{Base\+Controller@{Base\+Controller}!post\+Input@{post\+Input}}
\index{post\+Input@{post\+Input}!Base\+Controller@{Base\+Controller}}
\subsubsection[{post\+Input}]{\setlength{\rightskip}{0pt plus 5cm}post\+Input (
\begin{DoxyParamCaption}
\item[{}]{\$input = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_base_controller_a170629218b28c1759a89c4978b9323b3}
Sanitizes and returns P\+O\+S\+T data


\begin{DoxyParams}[1]{Parameters}
string & {\em \$input} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string/array 
\end{DoxyReturn}


Definition at line 29 of file Base\+Controller.\+php.



Referenced by Basic\textbackslash{}create\+User(), and Basic\textbackslash{}edit\+User\+Post().


\begin{DoxyCode}
29                                                 \{
30         $post = filter\_input\_array(INPUT\_POST, FILTER\_SANITIZE\_STRING);
31 
32         \textcolor{keywordflow}{if} ($input) \{
33             \textcolor{keywordflow}{return} $post[$input];
34         \}
35         \textcolor{keywordflow}{else} \{
36             \textcolor{keywordflow}{return} $post;
37         \}
38     \}
\end{DoxyCode}
\hypertarget{class_base_controller_aa0c49b95cd8e5ff8ff61b4a2c35bf1eb}{}\index{Base\+Controller@{Base\+Controller}!render\+View@{render\+View}}
\index{render\+View@{render\+View}!Base\+Controller@{Base\+Controller}}
\subsubsection[{render\+View}]{\setlength{\rightskip}{0pt plus 5cm}render\+View (
\begin{DoxyParamCaption}
\item[{}]{\$view, }
\item[{}]{\$data = {\ttfamily \mbox{[}\mbox{]}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_base_controller_aa0c49b95cd8e5ff8ff61b4a2c35bf1eb}
Loads a given view into the controller


\begin{DoxyParams}[1]{Parameters}
string & {\em \$view} & \\
\hline
array & {\em \$data} & \\
\hline
\end{DoxyParams}


Definition at line 46 of file Base\+Controller.\+php.



Referenced by Basic\textbackslash{}edit\+User(), Basic\textbackslash{}index(), and Basic\textbackslash{}user().


\begin{DoxyCode}
46                                                      \{
47         $loader = \textcolor{keyword}{new} Twig\_Loader\_Filesystem(realpath(\_\_DIR\_\_ . \textcolor{stringliteral}{'/..'}) . \textcolor{stringliteral}{'/views'});
48         $twig = \textcolor{keyword}{new} Twig\_Environment($loader, [
49             \textcolor{stringliteral}{'debug'} => \textcolor{keyword}{true},
50             ]);
51         $twig->addExtension(\textcolor{keyword}{new} Twig\_Extension\_Debug());
52 
53         \textcolor{keywordflow}{return} $twig->render($view . \textcolor{stringliteral}{'.php'}, [
54             \textcolor{stringliteral}{'data'} => $data
55             ]);
56     \}
\end{DoxyCode}
\hypertarget{class_base_controller_abd4f25604b09a96c254491df97612cc3}{}\index{Base\+Controller@{Base\+Controller}!scrape@{scrape}}
\index{scrape@{scrape}!Base\+Controller@{Base\+Controller}}
\subsubsection[{scrape}]{\setlength{\rightskip}{0pt plus 5cm}scrape (
\begin{DoxyParamCaption}
\item[{}]{\$action, }
\item[{}]{\$url, }
\item[{}]{\$curl = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_base_controller_abd4f25604b09a96c254491df97612cc3}
Scrapes H\+T\+M\+L source code from the given U\+R\+L


\begin{DoxyParams}[1]{Parameters}
string & {\em \$url} & \\
\hline
string & {\em \$action} & \\
\hline
curl & {\em \$curl} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string \$html 
\end{DoxyReturn}


Definition at line 66 of file Base\+Controller.\+php.



References str\+\_\+get\+\_\+html().



Referenced by Basic\textbackslash{}scrape\+Pdf(), and Basic\textbackslash{}scrape\+Website().


\begin{DoxyCode}
66                                                            \{
67         \textcolor{keywordflow}{switch} (strtoupper($action)) \{
68             \textcolor{keywordflow}{case} \textcolor{stringliteral}{'GET'}:
69             $html = \textcolor{keyword}{new} \hyperlink{classsimple__html__dom}{simple\_html\_dom}();
70             \textcolor{keywordflow}{if} ($curl) \{
71                 curl\_setopt($curl, CURLOPT\_RETURNTRANSFER, 1); 
72                 curl\_setopt($curl, CURLOPT\_POST, 0);
73                 curl\_setopt($curl, CURLOPT\_URL, $url);
74                 $html = \hyperlink{simple__html__dom_8php_a2a9c7626f0cb0a56eb81709124a08922}{str\_get\_html}(curl\_exec($curl));
75                 curl\_close($curl);
76             \}
77             \textcolor{keywordflow}{else} \{
78                 $html->load\_file($url);
79             \}
80             \textcolor{keywordflow}{return} $html;
81             \textcolor{keywordflow}{break};
82             
83             \textcolor{keywordflow}{case} \textcolor{stringliteral}{'PDF'}:
84             $parser = \textcolor{keyword}{new} Parser();
85             $pdf = $parser->parseFile($url);
86 
87             \textcolor{keywordflow}{return} $pdf;
88             \textcolor{keywordflow}{break};
89         \}
90     \}
\end{DoxyCode}
\hypertarget{class_base_controller_a259a554926fc05640c8c711c340cdeac}{}\index{Base\+Controller@{Base\+Controller}!session@{session}}
\index{session@{session}!Base\+Controller@{Base\+Controller}}
\subsubsection[{session}]{\setlength{\rightskip}{0pt plus 5cm}session (
\begin{DoxyParamCaption}
\item[{}]{\$url, }
\item[{}]{\$post\+Data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_base_controller_a259a554926fc05640c8c711c340cdeac}
Initializes session with c\+U\+R\+L and saves session cookies in file for later retrieval


\begin{DoxyParams}[1]{Parameters}
string & {\em \$url} & \\
\hline
array & {\em \$post\+Data} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\$curl 
\end{DoxyReturn}


Definition at line 99 of file Base\+Controller.\+php.


\begin{DoxyCode}
99                                                 \{
100         $curl = curl\_init();
101 
102         curl\_setopt($curl, CURLOPT\_RETURNTRANSFER, 1); 
103 
104         curl\_setopt($curl, CURLOPT\_URL, $url);
105         $cookie = dirname(\_\_FILE\_\_) . \textcolor{stringliteral}{'/cookies.txt'};
106         $timeout = 30;
107 
108         curl\_setopt($curl, CURLOPT\_USERAGENT, \textcolor{stringliteral}{'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36
       (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36'});
109         curl\_setopt($curl, CURLOPT\_FOLLOWLOCATION, 1);
110         curl\_setopt($curl, CURLOPT\_TIMEOUT, 10); 
111         curl\_setopt($curl, CURLOPT\_CONNECTTIMEOUT, $timeout);
112         curl\_setopt($curl, CURLOPT\_COOKIEJAR, $cookie);
113         curl\_setopt($curl, CURLOPT\_COOKIEFILE, $cookie);
114 
115         curl\_setopt($curl, CURLOPT\_POST, 1); 
116         curl\_setopt($curl, CURLOPT\_POSTFIELDS, http\_build\_query($postData));     
117         curl\_setopt($curl, CURLOPT\_SSL\_VERIFYPEER, 0);
118         unlink($cookie);
119         curl\_exec($curl);
120 
121         \textcolor{keywordflow}{return} $curl;
122     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/xampp/htdocs/mvc-\/framework/application/kernel/\hyperlink{_base_controller_8php}{Base\+Controller.\+php}\end{DoxyCompactItemize}
